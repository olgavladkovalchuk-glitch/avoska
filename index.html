<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Avoska Raid</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}:root{--orange:#D95408;--blue:#9BCDE1;--beige:#f4e4c1;--dark:#1a1a1a}body{width:100vw;height:100vh;overflow:hidden;background-color:var(--beige);font-family:'JetBrains Mono',monospace;display:flex;flex-direction:column;align-items:center;justify-content:center;touch-action:manipulation;color:#000;position:relative}body::before{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(0,0,0,0.15) 1px,transparent 1px),linear-gradient(90deg,rgba(0,0,0,0.15) 1px,transparent 1px);background-size:50px 50px;pointer-events:none;z-index:0}#intro-screen{position:fixed;inset:0;background:var(--dark);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:30px;text-align:center}#intro-screen::before{content:'';position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);background-size:50px 50px;pointer-events:none}#intro-screen.hidden{display:none}.intro-avoska{width:85vw;max-width:500px;margin-bottom:30px;z-index:1;position:relative}.intro-title{font-size:28px;font-weight:800;text-transform:uppercase;margin-bottom:30px;line-height:1.3;color:#fff;z-index:1;position:relative}.intro-subtitle{font-size:14px;line-height:1.6;margin-bottom:40px;max-width:350px;color:#ccc;z-index:1;position:relative}.intro-btn{background:var(--orange);color:#fff;border:5px solid #fff;padding:20px 40px;font-size:20px;font-weight:800;text-transform:uppercase;cursor:pointer;z-index:1;position:relative}#boss-container{position:relative;width:95vw;max-width:600px;margin-bottom:40px;z-index:1}#boss-img{width:100%;height:auto;display:block;pointer-events:none}.hit{animation:hit-brutal .1s}@keyframes hit-brutal{0%,100%{transform:scale(1)}50%{transform:scale(.95)}}.bubble{position:absolute;top:-70px;left:50%;transform:translateX(-50%) scale(.8);background:var(--dark);color:#fff;padding:15px 25px;font-size:16px;font-weight:800;text-transform:uppercase;text-align:center;letter-spacing:1px;clip-path:polygon(2% 0%,8% 3%,15% 1%,22% 4%,30% 0%,38% 3%,45% 1%,52% 4%,60% 0%,68% 3%,75% 1%,82% 4%,90% 0%,95% 2%,98% 5%,100% 10%,98% 20%,100% 30%,97% 40%,100% 50%,98% 60%,100% 70%,97% 80%,100% 90%,95% 95%,90% 98%,82% 96%,75% 99%,68% 97%,60% 100%,52% 96%,45% 99%,38% 97%,30% 100%,22% 96%,15% 99%,8% 97%,2% 100%,0% 95%,3% 85%,0% 75%,2% 65%,0% 55%,3% 45%,0% 35%,2% 25%,0% 15%,2% 5%);box-shadow:3px 3px 10px rgba(0,0,0,.3);opacity:0;transition:.2s ease-out;pointer-events:none;z-index:100;white-space:nowrap;max-width:90vw}.bubble.show{opacity:1;transform:translateX(-50%) scale(1)}.ui-container{width:90%;max-width:500px;text-align:center;z-index:1}.hp-text{font-size:16px;margin-bottom:12px;color:var(--dark);font-weight:800;text-transform:uppercase;letter-spacing:2px}.hp-bar-frame{width:100%;height:40px;background:var(--beige);border:5px solid var(--dark);position:relative;overflow:hidden}.hp-bar-fill{width:100%;height:100%;background:var(--orange);transition:width .15s linear}#loot-btn{display:none;width:100%;padding:25px 0;margin-top:25px;background:var(--orange);color:#fff;border:5px solid var(--dark);font-size:24px;font-weight:800;text-transform:uppercase;letter-spacing:3px;cursor:pointer;transition:transform .1s}#loot-btn:active{transform:scale(.95)}.footer{margin-top:20px;font-size:11px;color:#333;text-transform:uppercase;font-weight:800;letter-spacing:1px;z-index:1}.footer a{color:var(--orange);text-decoration:none;border-bottom:2px solid var(--orange)}.dmg-num{position:absolute;color:var(--orange);font-size:48px;font-weight:800;pointer-events:none;z-index:100;animation:dmg-fly .5s ease-out forwards;text-shadow:2px 2px 0 var(--dark)}@keyframes dmg-fly{to{transform:translateY(-100px) scale(1.5);opacity:0}}#status{font-size:12px;color:#555;margin-top:12px;font-weight:800;text-transform:uppercase;letter-spacing:1px}
</style>
</head>
<body>
<div id="intro-screen">
<img class="intro-avoska" src="https://raw.githubusercontent.com/olgavladkovalchuk-glitch/avoska/main/avoska_start.png">
<div class="intro-title">НУ ЧТО,<br>ОТБЕРЕШЬ У МЕНЯ<br>ДРОП?</div>
<div class="intro-subtitle">Кликай на Авоську — внеси вклад в завоевание полезного (а может и бесполезного) дропа</div>
<button class="intro-btn" onclick="startRaid()">НАЧАТЬ</button>
</div>
<div id="boss-container">
<div class="bubble" id="bubble">РУКИ ПРОЧЬ!</div>
<img id="boss-img" src="https://raw.githubusercontent.com/olgavladkovalchuk-glitch/avoska/main/avoska_idle.png">
</div>
<div class="ui-container">
<div class="hp-text" id="hp-label">LOADING...</div>
<div class="hp-bar-frame"><div class="hp-bar-fill" id="hp-fill"></div></div>
<div id="status">ПОДКЛЮЧЕНИЕ...</div>
<div id="loot-btn">ЗАБРАТЬ</div>
</div>
<div class="footer">ПРОДУКТ КОМАНДЫ <a href="https://t.me/mania_course" target="_blank">КУРСОМАНИИ</a></div>
<script>
const CONFIG={supabaseUrl:'https://afotpqotuzjcsyihqayo.supabase.co',supabaseKey:'sb_publishable_sogONrEqUyLmZhdxFUHgqA_cKnfQh47',imgIdle:'https://raw.githubusercontent.com/olgavladkovalchuk-glitch/avoska/main/avoska_idle.png',imgHit:'https://raw.githubusercontent.com/olgavladkovalchuk-glitch/avoska/main/avoska_idle.png',imgDead:'https://raw.githubusercontent.com/olgavladkovalchuk-glitch/avoska/main/avoska_end.png',botUsername:'OldAvoskaBot',phrases:["НАДОЕЛИ!","РУКИ ПРОЧЬ!","КОМУ ГОВОРЮ!","НЕ ТРОНЬ!","ЭЙ, ПОЛЕГЧЕ!","ХВАТИТ УЖЕ!","ЧТО ЗА НАГЛОСТЬ?","МНЕ ЩЕКОТНО!","КУРСОМАНИЯ FOREVER!","НУ ВСЁ, ХВАТИТ!","НЕ МОГУ БОЛЬШЕ..."]};function startRaid(){document.getElementById('intro-screen').classList.add('hidden')}const{createClient}=supabase;const client=createClient(CONFIG.supabaseUrl,CONFIG.supabaseKey);const tg=window.Telegram.WebApp;tg.expand();let currentHP=100,maxHP=100,queue=0;const bossImg=document.getElementById('boss-img'),hpFill=document.getElementById('hp-fill'),hpLabel=document.getElementById('hp-label'),lootBtn=document.getElementById('loot-btn'),status=document.getElementById('status'),bubble=document.getElementById('bubble'),container=document.getElementById('boss-container'),introScreen=document.getElementById('intro-screen');bossImg.src=CONFIG.imgIdle;async function init(){const{data}=await client.from('raid').select('*').eq('id',1).single();if(data){updateUI(data.hp,data.max_hp);status.innerText="ОНЛАЙН";if(data.hp<=0)introScreen.classList.add('hidden')}else status.innerText="ОШИБКА";client.channel('public:raid').on('postgres_changes',{event:'UPDATE',schema:'public',table:'raid'},payload=>{updateUI(payload.new.hp,payload.new.max_hp)}).subscribe()}function updateUI(hp,max){currentHP=hp;maxHP=max;if(currentHP<0)currentHP=0;const pct=currentHP/maxHP*100;hpFill.style.width=pct+'%';hpLabel.innerText=`${currentHP} / ${maxHP}`;if(currentHP<=0){bossImg.src=CONFIG.imgDead;lootBtn.style.display='block';status.innerText="РЕЙД ЗАВЕРШЕН";container.style.pointerEvents='none';queue=0}else{container.style.pointerEvents='auto';if(!bossImg.classList.contains('hit'))bossImg.src=CONFIG.imgIdle;lootBtn.style.display='none'}}let bubbleTimeout;container.addEventListener('pointerdown',e=>{if(currentHP<=0)return;bossImg.src=CONFIG.imgHit;bossImg.classList.remove('hit');void bossImg.offsetWidth;bossImg.classList.add('hit');setTimeout(()=>{if(currentHP>0)bossImg.src=CONFIG.imgIdle},100);if(Math.random()>.7){bubble.innerText=CONFIG.phrases[Math.floor(Math.random()*CONFIG.phrases.length)];bubble.classList.add('show');clearTimeout(bubbleTimeout);bubbleTimeout=setTimeout(()=>bubble.classList.remove('show'),1e3)}const el=document.createElement('div');el.innerText="-1";el.className='dmg-num';el.style.left=e.clientX-20+'px';el.style.top=e.clientY-70+'px';document.body.appendChild(el);setTimeout(()=>el.remove(),500);queue++;currentHP--;updateUI(currentHP,maxHP);if(navigator.vibrate)navigator.vibrate(10)});setInterval(async()=>{if(queue>0&&currentHP>0){const dmg=queue;queue=0;const{data}=await client.from('raid').select('hp').eq('id',1).single();if(data&&data.hp>0){const newHP=Math.max(0,data.hp-dmg);await client.from('raid').update({hp:newHP}).eq('id',1)}}},1e3);lootBtn.addEventListener('click',()=>{const link=`https://t.me/${CONFIG.botUsername}?start=loot`;if(tg.openTelegramLink)tg.openTelegramLink(link);else window.open(link,'_blank');setTimeout(()=>{tg.close()},500)});init()
</script>
</body>
</html>
